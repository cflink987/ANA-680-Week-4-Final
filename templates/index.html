<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gaming Addiction Risk Predictor</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 36px; color:#111; }
    h1 { margin: 0 0 6px; font-size: 34px; }
    .sub { margin: 0 0 20px; color:#555; }
    .meta { display:flex; gap:10px; flex-wrap: wrap; margin-bottom: 18px; color:#444; }
    .pill { background:#f2f2f2; border:1px solid #ddd; padding:4px 10px; border-radius: 999px; font-size: 13px; }
    .box { border:1px solid #ddd; border-radius: 12px; padding: 18px; max-width: 980px; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap: 16px 24px; }
    label { display:block; font-weight: 650; margin-bottom: 6px; text-transform: lowercase; }
    input, select { width:100%; padding: 10px; border:1px solid #bbb; border-radius: 8px; font-size: 14px; }
    .allowed { margin-top:6px; color:#666; font-size: 12px; }
    .btn { margin-top: 18px; padding: 10px 18px; border:1px solid #333; border-radius: 8px; background: #f2f2f2; cursor:pointer; }
    .ok { background:#e9fff0; border:1px solid #8fe2ad; padding: 12px; border-radius: 10px; margin-bottom: 14px; }
    .err { background:#ffecec; border:1px solid #ff9c9c; padding: 12px; border-radius: 10px; margin-bottom: 14px; }
    code { background:#f6f6f6; padding:2px 6px; border-radius: 6px; }
    @media (max-width: 860px) { .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>Gaming Addiction Risk Predictor</h1>
  <p class="sub">Enter the 12 feature values and click Predict. (API endpoint: <code>POST /predict</code>)</p>

  <div class="meta">
    <span class="pill">Input policy: <strong>{{ policy }}</strong></span>
    <span class="pill">Bounds: <strong>{{ bounds.bounds_type }}</strong></span>
  </div>

  <div class="box">
    {% if error %}
      <div class="err"><strong>Error:</strong> {{ error }}</div>
    {% endif %}

    {% if clipped_fields and clipped_fields|length > 0 %}
      <div class="err">
        <strong>Some inputs were clipped:</strong>
        <ul>
          {% for k,v in clipped_fields.items() %}
            <li><code>{{ k }}</code>: {{ v.from }} → {{ v.to }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% if result %}
      <div class="ok">
        <div><strong>Prediction:</strong> {{ result.prediction }} (1 = high_addiction)</div>
        <div><strong>Probability:</strong> {{ "%.4f"|format(result.probability) }}</div>
      </div>
    {% endif %}

    <form method="post" action="/predict">
      <div class="grid">

        {% for f in required_features %}
          {% if f == "gender" %}
            <div>
              <label>{{ labels.get(f, f) }}</label>
              {% set g = values.get('gender','') %}
              <select name="gender" required>
                <option value="" disabled {% if g=='' %}selected{% endif %}>Select…</option>
                {% for opt in bounds.features.gender.allowed %}
                  <option value="{{ opt }}" {% if g==opt %}selected{% endif %}>{{ opt }}</option>
                {% endfor %}
              </select>
              <div class="allowed">Allowed: {{ bounds.features.gender.allowed|join(", ") }}</div>
            </div>
          {% else %}
            <div>
              <label>{{ labels.get(f, f) }}</label>
              <input
                name="{{ f }}"
                type="number"
                step="any"
                min="{{ bounds.features[f].min }}"
                max="{{ bounds.features[f].max }}"
                value="{{ values.get(f,'') }}"
                required
              />
              <div class="allowed">
                Allowed: {{ "%.4f"|format(bounds.features[f].min) }} to {{ "%.4f"|format(bounds.features[f].max) }}
              </div>
            </div>
          {% endif %}
        {% endfor %}

      </div>

      <button class="btn" type="submit">Predict</button>
    </form>
  </div>
</body>
</html>